<Project>

  <!--
    Command-line options:
    - MyAssemblyTitle   default = AssemblyName
  -->
  <PropertyGroup>
    <MyAssemblyTitle Condition=" $(MyAssemblyTitle) == '' ">$(AssemblyName)</MyAssemblyTitle>

    <AssemblyTitle>$(MyAssemblyTitle) [$(TargetFramework)]</AssemblyTitle>
  </PropertyGroup>

  <!-- API profiles -->
  <PropertyGroup>
    <!--
      See "BuildPlatforms" and "PackPlatforms" in D.B.props.
      Profile 2.1: "netstandard2.1" and "netcoreapp3.1" ie "MaxPlatform".
      Profile 2.0 (default): everything else.
    -->
    <ApiProfileMoniker>netstandard2.0</ApiProfileMoniker>
    <ApiProfileMoniker Condition=" $(TargetFramework) == 'netstandard2.1' ">netstandard2.1</ApiProfileMoniker>
    <ApiProfileMoniker Condition=" $(TargetFramework) == $(MaxPlatform) ">netstandard2.1</ApiProfileMoniker>
  </PropertyGroup>

  <!-- Compiler symbols -->
  <PropertyGroup>
    <!-- CONTRACTS_FULL is necessary to enable the attribute Pure -->
    <DefineConstants>$(DefineConstants);CONTRACTS_FULL</DefineConstants>

    <!-- Ranges of platforms -->
    <DefineConstants Condition=" $(TargetFramework.StartsWith('netstandard1.')) ">$(DefineConstants);NETSTANDARD1_x</DefineConstants>
    <DefineConstants Condition=" $(TargetFramework.StartsWith('netcoreapp2.')) ">$(DefineConstants);NETCOREAPP2_x</DefineConstants>

    <!-- API profiles -->
    <DefineConstants Condition=" $(ApiProfileMoniker) == 'netstandard2.1' ">$(DefineConstants);API_PROFILE_21</DefineConstants>
  </PropertyGroup>

  <!-- Shims for older platforms -->
  <ItemGroup>
    <Compile Include="$(SourceRoot)MissingAttributes.cs" />
    <Compile Include="$(SourceRoot)NullableAttributes.cs" />
  </ItemGroup>

</Project>
