<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFrameworks>$(MaxPlatform)</TargetFrameworks>

    <!--
      IDE0002   Simplify Member Access
      xUnit1004 Test methods should not be skipped
    -->
    <RelaxWarnings>true</RelaxWarnings>
    <RelaxAsyncWarnings>true</RelaxAsyncWarnings>
    <NoWarn>$(NoWarn);IDE0002;xUnit1004</NoWarn>
  </PropertyGroup>

  <ItemGroup>
    <None Update="xunit.runner.json">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>

  <!--
    Dependencies.
    - Microsoft.Bcl.HashCode does not support .NET Framework <= 4.6, see D.B.props
    - Microsoft.NET.Test.Sdk can cause problems with older platforms, see "eng\test.ps1"
    - xunit.runner.visualstudio does not support .NET Framework <= 4.5.1
      Warning NU1701. This is something that should not happen, except that we
      tweak "TargetFrameworks" in "eng\build.ps1". This is harmless since we
      are only building the project, we don't actually run it.
      https://docs.microsoft.com/en-us/dotnet/core/porting/third-party-deps#net-framework-compatibility-mode
      Finally we simply do not add "xunit.runner.visualstudio" when targetting
      .Net Standard.
  -->
  <ItemGroup>
    <PackageReference Include="coverlet.msbuild" Version="2.8.1">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.Bcl.HashCode" Version="1.1.0"
                      Condition=" $(AddHashCodePackage) == 'true' " />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="16.6.1"
                      Condition=" $(BuildingInsideVisualStudio) == 'true' "/>
    <PackageReference Include="System.ValueTuple" Version="4.5.0" />
    <PackageReference Include="xunit" Version="2.4.1" />
    <PackageReference Include="xunit.runner.visualstudio" Version="2.4.1"
                      Condition=" $(TargetFrameworks.Contains('netstandard')) == '' ">
      <!--<NoWarn Condition=" $(TargetFrameworks.Contains('netstandard')) != '' ">NU1701</NoWarn>-->
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\Abc.Maybe\Abc.Maybe.csproj" />
    <ProjectReference Include="..\Abc.Sketches\Abc.Sketches.csproj" />
    <ProjectReference Include="..\Abc.Testing\Abc.Testing.csproj" />
  </ItemGroup>

</Project>
