<Project Sdk="Microsoft.NET.Sdk">

  <!--
    Prerequesite: .NET Framework Developer Pack or Targeting Pack, the later
    should suffice. Might no longer be necessary as we now add a reference to
    Microsoft.NETFramework.ReferenceAssemblies.
    A very simple way to see what works and what does not is to compile this
    project with /p:AllKnown=true.
    https://docs.microsoft.com/en-us/dotnet/framework/install/guide-for-developers
    https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/how-to-determine-which-versions-are-installed
  -->

  <PropertyGroup>
    <VisibleInternals>false</VisibleInternals>
    <RelaxCAWarnings>true</RelaxCAWarnings>
  </PropertyGroup>

  <!-- On non-Windows OSes, we ignore Mono entirely -->
  <Choose>
    <When Condition=" '$(AllKnown)' == 'true' ">
      <PropertyGroup>
        <TargetFrameworks>$(MaxCorePlatforms)</TargetFrameworks>
        <TargetFrameworks Condition=" '$(OS)' == 'Windows_NT' ">
          $(TargetFrameworks);$(MaxClassicPlatforms);
        </TargetFrameworks>
      </PropertyGroup>
    </When>

    <Otherwise>
      <PropertyGroup>
        <TargetFrameworks>$(MinCorePlatforms)</TargetFrameworks>
        <TargetFrameworks Condition=" '$(OS)' == 'Windows_NT' ">
          $(TargetFrameworks);$(MinClassicPlatforms)
        </TargetFrameworks>
      </PropertyGroup>
    </Otherwise>
  </Choose>

  <PropertyGroup Condition=" '$(NotSupported)' == 'true' ">
    <TargetFrameworks>$(TargetFrameworks);$(NotSupportedTestPlatforms)</TargetFrameworks>
  </PropertyGroup>

</Project>
