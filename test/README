README
------

The actual test project is not here but in "src" and is called Abc.Tests.

This directory contains test projects for the package.
They are really meant to work with "eng\test-package.ps1".

## Using dotnet.exe.

Of course, one can still use the dotnet command-line directly:
  > dotnet build Abc.PackageTests
  > dotnet build Abc.PackageTests /p:AllKnown=true
  > dotnet test Abc.PackageTests -f net48

At any time, we can see the versions in use:
  > dotnet list Abc.PackageTests package --framework net48
We can also look for outdated packages
  > dotnet list Abc.PackageTests package --framework net48 --outdated --include-prerelease
We used net48, but any other would do the job.

## Default version or a specific one.

Default version (the one listed in Directory.Build.props).
  > dotnet restore Abc.PackageTests -v n
  > dotnet build Abc.PackageTests
  > dotnet build Abc.PackageTests -f net48
At any time, we can see the versions in use:
  > dotnet list Abc.PackageTests package --framework net48
Beware, this won't work with "net45" and "net451" since they are not supported
by xunit.runner.visualstudio.

Restore accepts params /p: and -v,
  > dotnet restore Abc.PackageTests -v n /p:AllKnown=true
  > dotnet restore Abc.PackageTests -v n /p:AbcVersion=1.0.0-ci-20200502.T081916
  > dotnet restore Abc.PackageTests -v n /p:AllKnown=true /p:AbcVersion=1.0.0-ci-20200502.T081916
Build accepts params /p: (net46 requires AllKnown, -v is available but too verbose),
  > dotnet build Abc.PackageTests /p:AllKnown=true
  > dotnet build Abc.PackageTests /p:AllKnown=true -f net46
  > dotnet build Abc.PackageTests /p:AllKnown=true -f net46 /p:AbcVersion=1.0.0-ci-20200502.T081916
List package does NOT accept params /p: and -v.

## Restore/build traps.

We can restore w/ a specific version in mind, but if the next build does not
specify a version, it will revert to the default version. If we wish to use the
last restored version we must use the option --no-restore.
- If we restore without /p:AbcVersion
  > dotnet restore Abc.PackageTests -v n
  > dotnet list Abc.PackageTests package --framework net48
  Abc.PackageTests uses the default version (no surprise).
- If we restore with /p:AbcVersion
  > dotnet restore Abc.PackageTests -v n /p:AbcVersion=1.0.0-ci-20200502.T081916
  > dotnet list Abc.PackageTests package --framework net48
  Abc.PackageTests uses version 1.0.0-ci-20200502.T081916 (no surprise).
- If we build without /p:AbcVersion
  > dotnet build Abc.PackageTests -f net48
  > dotnet list Abc.PackageTests package --framework net48
  **Abc.PackageTests is back to the _default_ version**
- If we restore with /p:AbcVersion
  > dotnet build Abc.PackageTests -f net48 /p:AbcVersion=1.0.0-ci-20200502.T081916
  > dotnet list Abc.PackageTests package --framework net48
  Abc.PackageTests uses version 1.0.0-ci-20200502.T081916.
- If we build without /p:AbcVersion BUT with --no-restore
  > dotnet build Abc.PackageTests -f net48 --no-restore
  > dotnet list Abc.PackageTests package --framework net48
  Abc.PackageTests uses the last restored version: 1.0.0-ci-20200502.T081916.
